(function(e){function n(t,n,r){switch(r){case"attach":e.extend(t,n);break;case"delegate":e.each(n,function(n,r){t[n]===undefined&&(t[n]=function(){var t=e.slice(arguments);t.unshift(this.widget()),r.apply(this,t)})})}}function r(t){var n=e.ui[t]||{},r=e.slice(arguments,1),i=0,s;while(s=n[r[i]])n=s,i++;return r[i]?s:n}function i(t){var n=/require\(\s*['"]?([^'")]*)/g,i=[],s,o,u;if(e.isPlainObject(t))return t;if(e.isFunction(t)){s=t.toString();while(o=n.exec(s))(u=o[1])&&!e.ui[u]&&i.push("$.ui."+u);if(i.length)throw"undefined modules: "+i.join(", ");return t(r)}throw"type error: factory should be function or object"}var t=[];e.ui=e.ui||{version:"1.0 beta",defineProperty:Object.defineProperty,create:function(r,i,s){s||(s=i,i=e.ui.widget);var o=[],u=new i,a=/\b_super\b/,f=u.__proto__,l=function(r,i){if(r){var s=this,u=e.slice(arguments);e.each(o,function(r,i){var o=i.split("."),i=t[o.shift()]||{},u,a={};e.each(o,function(e,t){u=t,i=i[u]}),i&&(u?a[u]=i:a=i),n(s,a,"delegate")}),s._createWidget.apply(s,u)}};return e.ui[r]=function(e,t){return new l(e,t)},l.prototype=e.extend(u,{widgetName:r,widgetBaseClass:u.widgetName||i},e.each(s,function(t,n){e.isFunction(n)&&e.isFunction(f[t])&&a.test(n.toString())&&(s[t]=function(){this._super=f[t];var e=n.apply(this,arguments);return delete this._super,e})})),{attach:function(t){o=o.concat(e.isArray(t)?t:t.split(","))}}},define:function(n,r){try{r||(r=n,n="_privateModule");var s=e.ui[n]||(e.ui[n]={}),o=i(r);t[n]=e.extend(s,o)}catch(u){throw new Error(u)}}}})(Zepto),function(e,t){e.ui.define("ex",function(){var n={},r=Object.prototype.toString,i;e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()}),e.implement=function(n,r,i){var s=r?e:e.fn;return e.each(n,function(e,n){var r=s[e];if(r==t||!r.$ex||i)n.$ex=!0,s[e]=n}),e},e.implement({_guid:0,emptyFn:function(){},type:function(e){return e==null?String(e):n[r.call(e)]||"object"},isNull:function(e){return e===null},isUndefined:function(e){return e===t},slice:function(e,t){return Array.prototype.slice.call(e,t||0)},bind:function(t,n,r){return function(){var r=(r||[]).concat(e.slice(arguments));t.apply(n,r)}},guid:function(){return this._guid++},later:function(e,t,n,r,i){var t=t||0,s=function(){e.apply(r,i)};return n?setInterval(s,t):setTimeout(s,t)},alert:function(){var e=!1;return function(t,n){e||(window.alert(t),n&&(e=!0))}}(),parseTpl:function(e,t){var n="var __p=[],print=function(){__p.push.apply(__p,arguments);};with(obj||{}){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,t){return"',"+t.replace(/\\'/g,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,t){return"');"+t.replace(/\\'/g,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+"');}return __p.join('');",r=new Function("obj",n);return t?r(t):r},loadFile:function(t,n,r){var i=/\.css(?:\?|$)/i.test(t),s=document.head||document.getElementsByTagName("head")[0],o=document.createElement(i?"link":"script"),n=n||e.emptyFn,u,a;i?(o.rel="stylesheet",o.href=t,s.appendChild(o)):(a=function(){n(),clearTimeout(u)},u=setTimeout(function(){throw a(),new Error("failed to load js file:"+t)},r||50),o.addEventListener("load",a,!1),o.async=!0,o.src=t,s.insertBefore(o,s.firstChild))}},!0);var s=e.fn.on,o=e.fn.off,u=e.fn.trigger,a={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove",tap:"click"},f=function(e){var t=[];return(e||"").split(" ").forEach(function(e){t.push("ontouchstart"in window?e:a[e]?a[e]:e)}),t.join(" ")};e.implement({on:function(e,t,n){return s.call(this,f(e),t,n)},off:function(e,t,n){return o.call(this,f(e),t,n)},offset:function(e){if(this.length==0)return null;var t="getBoundingClientRect"in this[0]?this[0].getBoundingClientRect():function(e){var t=e.offsetTop,n=e.offsetLeft,r=e.offsetWidth,i=e.offsetHeight;while(e.offsetParent)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t-=window.pageYOffset,n-=window.pageXOffset,{top:t,left:n,right:n+r,bottom:t+i,width:r,height:i}}(this[0]);return{left:t.left+(e?0:window.pageXOffset),top:t.top+(e?0:window.pageYOffset),width:t.width,height:t.height,right:t.right+(e?0:window.pageXOffset),bottom:t.bottom+(e?0:window.pageYOffset)}},trigger:function(t){var n=e.slice(arguments);if(e.fn.trigger.caller){var i=e.fn.trigger.caller.arguments,s;e.type(t)=="string"&&(n[0]=e.Event(t)),i&&(s=i[0])&&/Event\]$/i.test(r.call(s))&&e.inArray(n[0].type,["tap","singleTap","doubleTap","swipe","swipeLeft","swipeRight","swipeUp","swipeDown "])>-1&&(n[0].originalEvent=s)}return u.apply(this,n)}},!1,!0),e(window).on("scroll",function(t){clearTimeout(i),i=setTimeout(function(){e(document).trigger("scrollStop")},50)})})}(Zepto),function(e){var t="highlight-",n=null,r=null,i=null,s=!1,o=function(s){var u=s.currentTarget,a=e(u).data(t+"className")||n&&n.data(t+"className"),f=function(e){var t;r&&clearTimeout(r),r=null,n&&(n.off("touchmove",o),i&&clearTimeout(i),t=n,e?i=setTimeout(function(){i=null,t.removeClass(a)},80):t.removeClass(a),n=null)},l=function(e){r=setTimeout(function(){var n=e.data(t+"className");e.addClass(n),r=null},80)};switch(s.type){case"touchstart":if(s.touches.length>1)return;case"mousedown":u!==document?(f(),n=e(u),s._target=u,l(n),n.on("touchmove",o)):s._target||f();break;case"touchmove":case"mousemove":f();break;case"touchend":case"mouseup":case"touchcancel":f(!0)}};e.implement({highlight:function(r){return r=r||"",s||(s=!0,e(document).on("touchstart touchend touchcancel",o)),this.each(function(){var i=e(this),s=i.data(t+"className")||"";n&&n[0]==this&&n.removeClass(s)&&r&&n.addClass(r),i.css("-webkit-tap-highlight-color","rgba(255,255,255,0)").data(t+"className",r),!s&&r?i.on("touchstart",o):s&&!r&&i.off("touchstart",o)})},behavior:function(){var t=e.slice(arguments);return this.highlight.apply(this,t)}},!1,!0),e(function(){var t=!0,n=function(){if(!t)return;t=!1;var n=e("[data-highlight]").not("[data-highlight-class-name]"),r=n.attr("data-highlight");r&&n.highlight(r),t=!0};e(document).bind("DOMSubtreeModified",n)})}(Zepto),function(e,t){e.ui.create("widget",function(){},{_createWidget:function(n,r){var i=this;e.isPlainObject(n)&&(r=n||{},n=t),e.extend(i,{_element:n&&e(n),_data:e.extend({status:!0,plugins:{}},i._data,r)}),i._create(),i._init(),i.widget().on("touchstart touchend tap",function(e){(e.bubblesList||(e.bubblesList=[])).push(i)})},_create:function(){},_init:function(){},destroy:function(){var t=this;e.each(t.data("plugins"),function(e,t){t.destroy()}),t.trigger("destroy").off().widget().remove(),t.__proto__=null,e.each(Object.keys?Object.keys(t):t,function(e,n){delete t[n]})},data:function(n,r){var i=this._data;return e.isPlainObject(n)?e.extend(i,n):r!==t?i[n]=r:i[n]},widget:function(e){return this._element=e||this._element},component:function(n,r){var i=this,s=i.data("plugins");try{e.isFunction(r)?s[n]=r.apply(i):r!==t&&(s[n]&&s[n].destroy(),delete s[n])}catch(o){}return s[n]},on:function(e,t,n){var r=this,e=e.toLowerCase(),i=r._callbacks||(r._callbacks={}),s=i[e]||(i[e]=[]);return s.push([t,n]),r},off:function(e,t){var n=this,r;if(!e)n._callbacks={};else if(r=n._callbacks){e=e.toLowerCase();if(!t)r[e]=[];else{var i=r[e];if(!i)return n;for(var s=0,o=i.length;s<o;s++)if(i[s]&&t===i[s][0]){i[s]=null;break}}}return n},trigger:function(t){var n=this,t=t.toLowerCase(),r=n.data("on"+t),i=e.slice(arguments,1),s,o,u;r&&r.apply(n,i);if(!t||!(o=n._callbacks))return n;if(s=o[t])for(var a=0,f=s.length;a<f;a++)u=s[a],u[0].apply(u[1]||n,i);return n}}),e(document).ready(function(){e(document).trigger("pageInit")})}(Zepto),function(e,t){e.ui.define("control",function(n){var r=e.os,i=parseFloat(r.version),s=!i,o=r.ios,u=r.android,a=/htc_sensation_z710e/i.test(navigator.userAgent),f={};return f.fix=function(n,r){var u=e(n),n=u.get(0),f=e.extend({zIndex:999},r||{}),l=o&&f.top!=0?70:0,c,h;if((s||o&&i>=5)&&!n.isFixed&&!a){u.css("position","fixed").css(f),n.isFixed=!0;return}u.css("position","absolute").css(f),n.isFixed||(n.isFixed=!0,h=r.bottom!==t?"bottom":"top",c=parseFloat(u.css(h))||0,e(document).on("scrollStop",function(e){u.css(h,c+(h=="bottom"?-window.pageYOffset-l:window.pageYOffset+l)+"px")}))},f.setFloat=function(t){var n=e(t),r=n.clone().css({opacity:0,display:"none"}).attr("id",""),i=!1,s={},o=n.css("position")||"static",u=function(){f.fix(n,{x:0,y:0}),r.css("display","block"),i=!0},a=function(){n.css("position",o),r.css("display","none"),i=!1},l=function(e){var t=r.get(0).getBoundingClientRect().top||n.get(0).getBoundingClientRect().top,e=e||0+t;e<0&&!i?u():e>0&&i&&a()};n.after(r),e(document).on("touchstart",function(e){s.y=e.touches[0].pageY}).on("touchmove",function(e){var t=e.touches[0].pageY-s.y;s.y=e.touches[0].pageY,l(t)}),e(window).on("scroll",function(){l()})},f})}(Zepto),function(e,t){e.ui.create("slider",{_data:{container:"",setup:!1,content:"",index:0,imgInit:2,imgZoom:!1,boundSpring:!1,springBack:!0,springBackDis:10,autoPlay:!0,autoPlayTime:5e3,animationTime:300,showArr:!0,showDot:!0,onclick:"",onslide:"",onslideend:"",_direction:1,_touchOver:0},_create:function(){this._createUI()._loadImg()},_init:function(){var t=this,n=t.data("index"),r=t.data("instance"),i=e.bind(t._eventHandler,t);e(t.data("wheel")).on("touchstart touchmove touchend webkitTransitionEnd",i),e(window).on("onorientationchange"in window?"orientationchange":"resize",i),e(".ui-slider-pre",r).on("tap",function(){t.pre()}),e(".ui-slider-next",r).on("tap",function(){t.next()}),t.data("onclick")&&t.widget().on("click",t.data("onclick")),n&&t._slide(n,0),t.data("autoPlay")&&t._setInterval(),t.on("destroy",function(){clearInterval(t.data("play")),e(window).off("onorientationchange"in window?"orientationchange":"resize",i)})},_createUI:function(){var t=this,n;if(!t.data("setup")){n=(t.widget()||t.widget(e("<div></div>"))).addClass("ui-slider")[0],n.parentNode?t.data("container")&&e(t.data("container")).append(n):e(t.data("container")||document.body).append(n);var r=0,i,s=[],o=t.data("content");o.length==1&&t.data("showArr",!1),n.innerHTML='<div class="ui-slider-wheel"><div class="ui-slider-group">'+function(){for(;i=o[r];r++)s.push('<div class="ui-slider-item"><a href="'+i.href+'"><img class="ui-slider-lazyload" lazyload="'+i.pic+'"/></a></div>');s.push(t.data("boundSpring")?"</div></div>":'</div><div class="ui-slider-group">'+s.join("")+"</div></div>");if(t.data("showDot")){s.push('<p class="ui-slider-items-dots">');while(r--)s.push("<b></b>");s.push("</p>")}return t.data("showArr")&&s.push('<span class="ui-slider-pre"><b></b></span><span class="ui-slider-next"><b></b></span>'),s.join("")}()}else n=t.widget().addClass("ui-slider")[0],t.data("boundSpring")||e(".ui-slider-wheel",n).append(e(".ui-slider-group",n).clone());var u=n.offsetWidth,a=n.offsetHeight,f=e(".ui-slider-item",n).css("width",u+"px").toArray(),l=f.length,c=e(".ui-slider-wheel",n).css("width",u*l+"px")[0],h=e(".ui-slider-items-dots b",n).toArray();return t.data("showDot")&&(h[t.data("index")].className="ui-slider-dot-select"),t.data({instance:n,wheel:c,items:f,length:l,width:u,height:a,dots:h}),t},_loadImg:function(){var t=this,n=t.data("instance"),r=e(".ui-slider-lazyload",n),i=e(".ui-slider-lazyload",n).toArray();t.data("imgZoom")&&r.on("load",function(){var e=this.height,n=this.width,r=t.data("height"),i=t.data("width"),s,o,u=this.style;e/r>n/i?(s=Math.min(e,r),u.height=s+"px",u.width=s/e*n+"px"):(o=Math.min(n,i),u.width=o+"px",u.height=o/n*e+"px"),this.onload=null});var s=r.toArray();(s.length==1||s.length==2&&!t.data("boundSpring"))&&t.data("autoPlay",!1);var o=0,u="",a=s.length,f=t.data("imgInit")||s.length;for(;o<f;o++)u=s[o],u&&(u.src=u.getAttribute("lazyload")),t.data("boundSpring")||(u=s[o+a/2],u&&(u.src=u.getAttribute("lazyload"))),i.shift();var l=t.data("items"),c=t.data("length"),h=t.data("width");if(e.os.ios)for(o=0;o<c;o++)l[o].style.webkitTransform="translate3d("+o*h+"px,0,0)";else for(o=0;o<c;o++)l[o].style.left=o*h+"px";return t.data({lazyImgs:i,allImgs:s}),t},_setInterval:function(){var e=this,t=e._data,n=t._direction;if(!n||!t.autoPlay)return;return clearInterval(t.play),t.play=setInterval(function(){e._slide.call(e,t.index+n,!0)},t.autoPlayTime),e},_slide:function(e,t){var n=this,r=n._data,i=r.length;return-1<e&&e<i?(n._move(e),r._direction=t?0:1):e==i?r.boundSpring?(n._move(e-(t?2:1)),r._direction=-1):(n._move(i/2-1,0),r._direction=1,setTimeout(function(){n._move(i/2)},20)):r.boundSpring?(n._move(e+(t?2:1)),r._direction=1):(n._move(i/2,0),r._direction=1,setTimeout(function(){n._move(i/2-1)},20)),n},_move:function(e,n){var r=this._data,i=r.wheel.style,s=r.boundSpring?e:e>r.length/2-1?e-r.length/2:e;n===t&&(n=r.animationTime),r.onslide&&this.trigger("slide",s);if(r.lazyImgs.length){var o=r.lazyImgs.shift();o.src=o.getAttribute("lazyload"),o=r.allImgs[e],o.src||(o.src=o.getAttribute("lazyload"))}r.showDot&&(r.instance.getElementsByClassName("ui-slider-dot-select")[0].className="",r.dots[s].className="ui-slider-dot-select"),r.index=e,i.webkitTransitionDuration=n+"ms",i.webkitTransform="translate3d("+ -e*r.width+"px,0,0)"},_eventHandler:function(e){var t=this;switch(e.type){case"touchstart":t._touchStart(e);break;case"touchmove":t._touchMove(e);break;case"touchend":t._touchEnd();break;case"webkitTransitionEnd":t._transitionEnd();break;case"orientationchange":case"resize":setTimeout(function(){t._resize.call(t)},150)}},_touchStart:function(e){var t=this;t.data({start:{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY},S:!1,T:!1,X:0}),t.data("wheel").style.webkitTransitionDuration="0ms",e.stopPropagation()},_touchMove:function(e){var t=this._data,n=t.X=e.touches[0].pageX-t.start.pageX;if(!t.T){if(new Date-t._touchOver<180)return;var r=t.index,i=t.length,s=Math.abs(n)<Math.abs(e.touches[0].pageY-t.start.pageY);t.boundSpring||(t.index=r>0&&r<i-1?r:r==i-1&&n<0?i/2-1:r==0&&n>0?i/2:r),s||clearInterval(t.play),t.T=!0,t.S=s}t.S||(e.preventDefault(),t.wheel.style.webkitTransform="translate3d("+(n-t.index*t.width)+"px,0,0)",e.stopPropagation())},_touchEnd:function(){var e=this,t=e._data,n=t.X,r=t.springBack?t.springBackDis:0;return e._slide(t.index+(n<=-r?1:n>r?-1:0),!1),t._touchOver=Number(new Date),e},_transitionEnd:function(){var e=this;e._setInterval();if(e.data("onslideend")){var t=e.data("index"),n=e.data("length");e.trigger("slideend",e.data("boundSpring")?t:t>n/2-1?t-n/2:t)}return e},_resize:function(){var t=this,n=t._data,r=n.wheel.style,i=n.width=n.instance.offsetWidth,s=n.length,o=n.items,u=0,a,f=e.os.ios;clearInterval(n.play),r.width=i*s+"px";for(;u<s;u++)a=o[u].style,a.width=i+"px",f?a.webkitTransform="translate3d("+u*i+"px,0,0)":a.left=u*i+"px";return r.webkitTransitionDuration="0ms",r.webkitTransform="translate3d("+ -(n.index*i)+"px,0,0)",n._direction=1,t._setInterval(),t},pre:function(){var e=this;return e._slide(e.data("index")-1,!1),e},next:function(){var e=this;return e._slide(e.data("index")+1,!1),e},stop:function(){var e=this;return clearInterval(e.data("play")),e.data("autoPlay",!1),e},resume:function(){var e=this;return e.data("_direction",1),e.data("autoPlay",!0),e._setInterval(),e}})}(Zepto),function(e){var t={init:function(t){var n={imgW:146,imgH:80};return t=e.extend(n,t),this.each(function(){var n=e(this),r=n.data("bdscroll");if(r)e.error("�Ѿ���ʼ����Ԫ���ˡ���");else{var i=e(window).width(),s=t.imgW,o=t.imgH,u=0,a=n.find("ul"),f=a.find("li").length,l=i*f,c=0;a.css({width:l+"px","margin-left":c+"px","-webkit-transition":"all 500ms ease 0"}),e(this).data("bdscroll",JSON.stringify({currPos:u,ulMarginLeft:c,liLen:f})),a.find("li").each(function(){var t=e(this).find("img").length;t*s>i&&(s=i/t);var n=(i-t*s)/(t+1);t==1?e(this).find("img").css({margin:"auto "+n+"px",width:s+"px",height:o+"px"}):e(this).find("img").each(function(r){var i=e(this);r==0?e(this).css({margin:"auto "+n/2+"px"+" auto "+n+"px",width:s+"px",height:o+"px"}):r==t-1?e(this).css({margin:"auto "+n+"px"+" auto "+n/2+"px",width:s+"px",height:o+"px"}):e(this).css({margin:"auto "+n/2+"px"+" auto "+n/2+"px",width:s+"px",height:o+"px"}),e(function(){if(i.attr("data-original")){var e=new Image;e.src=i.attr("data-original"),e.load=function(){i.attr("src",i.attr("data-original"))}}})})})}})},destroy:function(){return this.each(function(){})},next:function(){return this.each(function(){var t=e(this),n=JSON.parse(t.data("bdscroll"));if(n){var r=e(window).width(),i=n.currPos,s=n.liLen,o=n.ulMarginLeft;if(i<s-1){o-=r;var u=t.find("ul");u.css({"margin-left":o+"px"}),e(this).data("bdscroll",JSON.stringify({currPos:i+1,ulMarginLeft:o,liLen:s}))}}})},prev:function(){return this.each(function(){var t=e(this),n=JSON.parse(t.data("bdscroll"));if(n){var r=e(window).width(),i=n.currPos,s=n.liLen,o=n.ulMarginLeft;if(i>0){o+=r;var u=t.find("ul");u.css({"margin-left":o+"px"}),e(this).data("bdscroll",JSON.stringify({currPos:i-1,ulMarginLeft:o,liLen:s}))}}})}};e.fn.bdscroll=function(n){if(t[n])return t[n].apply(this,Array.prototype.slice.call(arguments,1));if(typeof n=="object"||!n)return t.init.apply(this,arguments);e.error("Method "+n+" does not exist on jQuery.bdscroll")}}(Zepto),function(e){e.fn.touchwipe=function(t){function s(e){var t=e.touches.length;if(t>0){var i=n?e.changedTouches[0]:e,s=i.screenX?i.screenX:i.pageX,o=i.screenY?i.screenY:i.pageY;r.startX=s,r.startY=o}r.isMove=!1}function o(e){var t=e.touches.length,i=r.startX,s=r.startY;if(t>0){var o=n?e.changedTouches[0]:e,u=o.screenX?o.screenX:o.pageX,a=o.screenY?o.screenY:o.pageY;r.endX=u,r.endY=a}r.absX=r.endX-r.startX,r.absY=r.endY-r.startY,r.absmoveX=r.endX-i,r.absmoveY=r.endY-s,Math.abs(r.absY)>Math.abs(r.absX)||(e.preventDefault(),Math.abs(r.absmoveX)<100?r.absmoveX>0:(r.absmoveX>0,r.isMove=!0))}function u(){if(!r.isMove)return;Math.abs(r.absY)>Math.abs(r.absX)||Math.abs(r.absmoveX)<100,event.preventDefault();if(r.endX>0&&Math.abs(r.endX-r.startX)>20)if(r.endX-r.startX<0)r.currPos++,i.wipeLeft();else if(r.endX-r.startX>0){if(r.currPos==0)return;r.currPos--,i.wipeRight()}r.endX=0}var n=!0,r={startX:0,startY:0,endX:0,endY:0,absX:0,absY:0,currPos:0,isMove:!1},i={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return t&&e.extend(i,t),this.each(function(){var t=n?"touchstart":"mousedown",r=n?"touchmove":"mousemove",i=n?"touchend":"mouseup";e(this).find("li,section").each(function(){e(this)[0].addEventListener(t,s,!1),e(this)[0].addEventListener(r,o,!1),e(this)[0].addEventListener(i,u,!1)})}),this}}(Zepto),function(e){e.fn.lazydo=function(t){function o(){t.live&&(r=e.isFunction(t.filter)?t.filter(n):n.find(t.filter));if(r.size()>0){var i=[];r.each(function(n,r){t.checker(r)?t.worker(e(r)):i.push(r)}),!t.repeat&&(r=e(i))}}function u(){r=(e.isFunction(t.filter)?t.filter(n):n.find(t.filter)).not(i).add(r),i=r,e(window).bind("scroll",o),o()}var n=this,r=null,i=[],s=!1;return t=e.extend({checker:function(e){var t=e.getBoundingClientRect();return t.top>0&&t.top<window.innerHeight},repeat:!1,live:!1},t),u(),n.domore=function(){return u(),n},n},e.fn.imglazyload=function(e){var t=this;return t.lazydo({filter:e.filter,worker:function(e){var t=e.data("original");return t&&e.attr("src",t),!0},checker:e.checker,live:e.live}),t.redo=function(){return t.domore()},t},e.fn.datalazyload=function(e){var t=this;return t.lazydo({filter:function(){return t},worker:e.loader,repeat:e.repeat})}}(Zepto);var Mustache=typeof module!="undefined"&&module.exports||{};(function(e){function a(e){return u.test(e)}function p(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return h[e]||e})}function d(e,t,n,r){r=r||"<template>";var i=t.split("\n"),s=Math.max(n-3,0),o=Math.min(i.length,n+3),u=i.slice(s,o),a;for(var f=0,l=u.length;f<l;++f)a=f+s+1,u[f]=(a===n?" >> ":"    ")+u[f];return e.template=t,e.line=n,e.file=r,e.message=[r+":"+n,u.join("\n"),"",e.message].join("\n"),e}function v(e,t,n){if(e===".")return t[t.length-1];var r=e.split("."),i=r.length-1,s=r[i],o,u,a=t.length,f,l;while(a){l=t.slice(0),u=t[--a],f=0;while(f<i){u=u[r[f++]];if(u==null)break;l.push(u)}if(u&&typeof u=="object"&&s in u){o=u[s];break}}return typeof o=="function"&&(o=o.call(l[l.length-1])),o==null?n:o}function m(e,t,n,r){var i="",u=v(e,t);if(r){if(u==null||u===!1||s(u)&&u.length===0)i+=n()}else if(s(u))o(u,function(e){t.push(e),i+=n(),t.pop()});else if(typeof u=="object")t.push(u),i+=n(),t.pop();else if(typeof u=="function"){var a=t[t.length-1],f=function(e){return S(e,a)};i+=u.call(a,n(),f)||""}else u&&(i+=n());return i}function g(t,n){n=n||{};var r=n.tags||e.tags,i=r[0],s=r[r.length-1],o=['var buffer = "";',"\nvar line = 1;","\ntry {",'\nbuffer += "'],u=[],l=!1,c=!1,h=function(){if(l&&!c&&!n.space)while(u.length)o.splice(u.pop(),1);else u=[];l=!1,c=!1},p=[],v,m,g,y=function(e){r=f(e).split(/\s+/),m=r[0],g=r[r.length-1]},b=function(e){o.push('";',v,'\nvar partial = partials["'+f(e)+'"];',"\nif (partial) {","\n  buffer += render(partial,stack[stack.length - 1],partials);","\n}",'\nbuffer += "')},w=function(e,r){var i=f(e);if(i==="")throw d(new Error("Section name may not be empty"),t,N,n.file);p.push({name:i,inverted:r}),o.push('";',v,'\nvar name = "'+i+'";',"\nvar callback = (function () {","\n  return function () {",'\n    var buffer = "";','\nbuffer += "')},E=function(e){w(e,!0)},S=function(e){var r=f(e),i=p.length!=0&&p[p.length-1].name;if(!i||r!=i)throw d(new Error('Section named "'+r+'" was never opened'),t,N,n.file);var s=p.pop();o.push('";',"\n    return buffer;","\n  };","\n})();"),s.inverted?o.push("\nbuffer += renderSection(name,stack,callback,true);"):o.push("\nbuffer += renderSection(name,stack,callback);"),o.push('\nbuffer += "')},x=function(e){o.push('";',v,'\nbuffer += lookup("'+f(e)+'",stack,"");','\nbuffer += "')},T=function(e){o.push('";',v,'\nbuffer += escapeHTML(lookup("'+f(e)+'",stack,""));','\nbuffer += "')},N=1,C,k;for(var L=0,A=t.length;L<A;++L)if(t.slice(L,L+i.length)===i){L+=i.length,C=t.substr(L,1),v="\nline = "+N+";",m=i,g=s,l=!0;switch(C){case"!":L++,k=null;break;case"=":L++,s="="+s,k=y;break;case">":L++,k=b;break;case"#":L++,k=w;break;case"^":L++,k=E;break;case"/":L++,k=S;break;case"{":s="}"+s;case"&":L++,c=!0,k=x;break;default:c=!0,k=T}var O=t.indexOf(s,L);if(O===-1)throw d(new Error('Tag "'+i+'" was not closed properly'),t,N,n.file);var M=t.substring(L,O);k&&k(M);var _=0;while(~(_=M.indexOf("\n",_)))N++,_++;L=O+s.length-1,i=m,s=g}else{C=t.substr(L,1);switch(C){case'"':case"\\":c=!0,o.push("\\"+C);break;case"\r":break;case"\n":u.push(o.length),o.push("\\n"),h(),N++;break;default:a(C)?u.push(o.length):c=!0,o.push(C)}}if(p.length!=0)throw d(new Error('Section "'+p[p.length-1].name+'" was not closed properly'),t,N,n.file);h(),o.push('";',"\nreturn buffer;","\n} catch (e) { throw {error: e, line: line}; }");var D=o.join("").replace(/buffer \+= "";\n/g,"");return n.debug&&(typeof console!="undefined"&&console.log?console.log(D):typeof print=="function"&&print(D)),D}function y(e,t){var n="view,partials,stack,lookup,escapeHTML,renderSection,render",r=g(e,t),i=new Function(n,r);return function(n,r){r=r||{};var s=[n];try{return i(n,r,s,v,p,m,S)}catch(o){throw d(o.error,e,o.line,t.file)}}}function w(){b={}}function E(e,t){return t=t||{},t.cache!==!1?(b[e]||(b[e]=y(e,t)),b[e]):y(e,t)}function S(e,t,n){return E(e)(t,n)}e.name="mustache.js",e.version="0.5.0-dev",e.tags=["{{","}}"],e.parse=g,e.compile=E,e.render=S,e.clearCache=w,e.to_html=function(e,t,n,r){var i=S(e,t,n);if(typeof r!="function")return i;r(i)};var t=Object.prototype.toString,n=Array.isArray,r=Array.prototype.forEach,i=String.prototype.trim,s;n?s=n:s=function(e){return t.call(e)==="[object Array]"};var o;r?o=function(e,t,n){return r.call(e,t,n)}:o=function(e,t,n){for(var r=0,i=e.length;r<i;++r)t.call(n,e[r],r,e)};var u=/^\s*$/,f;if(i)f=function(e){return e==null?"":i.call(e)};else{var l,c;a(" ")?(l=/^\s+/,c=/\s+$/):(l=/^[\s\xA0]+/,c=/[\s\xA0]+$/),f=function(e){return e==null?"":String(e).replace(l,"").replace(c,"")}}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},b={}})(Mustache),function(e){function s(){t&&t.removeClass(t.data(n)),r=t=null}function o(e,t){t.parentNode.replaceChild(e,t)}var t,n="active",r,i='*:not(script),script[type*="mustache"]';$.extend(Array.prototype,{rand:function(){return Math.random()*this.length|0},last:function(){return this[this.length-1]},out:function(e){var t=this.indexOf(e);if(t!=-1)return this.splice(t,1)}}),e.on("touchstart","[data-"+n+"]",function(e){s(),t=$(e.currentTarget),t.addClass(t.data(n))}).on("touchmove touchend touchcancel longTap",function(){r&&clearTimeout(r),r=setTimeout(s,500)});var u=function(){function i(){$.each(t,function(e,t){$.isFunction(t)?t(r,n):$.isFunction(t.handleEvent)&&t.handleEvent(r,n)})}function s(e){return/#(.*)/.test(e)?RegExp.$1:""}var t=[],n=s(location.hash),r;return"onhashchange"in window?e.on("hashchange",function(e){r=s("newURL"in e?e.newURL:location.hash),i(),n=r}):setInterval(function(){r=s(location.hash),n!=r&&(i(),n=r)},300),{on:function(e){e&&t.indexOf(e)<0&&t.push(e)},off:function(e){e?t.out(e):t=[]}}}();$.extend($,{bdcommon:{_cache:{},setCacheData:function(e,t){this._cache[e]=t},getCacheData:function(e){return this._cache[e]||""},gotoTop:function(){scrollTo(0,1),document.body.scrollIntoView()}},bdbrowser:function(){function t(e,t){this.selector=e,this.loading=!1,this.index=0,(this.entries=[$(e)])[0].id=t,u.on(this)}return $.extend(t.prototype,{sync:function(){var e=$(this.selector)[0];e.parentNode.replaceChild(this.entries[this.index][0],e)},handleEvent:function(e){e=+e,this.index!=e&&e in this.entries&&(this.index=e,this.sync())},top:function(){window.topURL?location=window.topURL:this.index&&history.go(-this.index)},open:function(t,n,r){if(this.loading)return;this.loading=!0;var i=this,s=$(".dk_loading").css({top:window.scrollY+(e.height()/2-16)+"px",left:e.width()/2-16+"px"}).show();$.ajax({url:t,timeout:15e3,success:function(e){i.loading=!1,s.hide(),i.load(t,e),n&&n()},error:function(){i.loading=!1,s.hide(),r&&r()}})},load:function(e,t){var n=$(this.selector)[0],r=n.cloneNode(),i=/\?.*?pageid=(.*?)(&|$)/.test(e)?RegExp.$1:"",s=this.entries[this.index].id==i?0:1;o(r,n),r=$(r).html(t),r.find('script:not([type*="mustache"])').remove(),r.id=i,this.entries.splice(this.index+s,Infinity,r);if(this.index+=s)location.hash=this.index;setTimeout(function(e){$.bdcommon.gotoTop(),e.removeClass("invisible")},50,$("html").addClass("invisible"))}}),t}()}),$.extend($.fn,{bddownload:function(e){return(this.selector&&this.length?this:$(".dk_a_normer_btn")).not(".bddownload").on("click",function(t){t.stopPropagation();var n=$(this),r=n.data("downurl"),i=n.data("downparam");$.get("./?pageid=Uoo2hcvk&src=game_androida&"+e+"&cntid="+i+"&r="+Math.random()*1e6,function(){window.location=r})}).addClass("bddownload")},bdshowmore:function(e){return this.each(function(){var t=this.parentNode;t.scrollHeight>t.offsetHeight&&$(this).show().on("click",function(){$(t).removeAttr(e),$(this).hide()})})},bdgamenav:function(e){for(var t in e)break;var n="navactive",r=$(".dk_loading"),s="global_nav_"+t,o=!1,u=$("#tabcontainer"),a="[data-sid]:not(."+n+")",f=this.find("[data-sid='"+t+"']").addClass(n);return this.on("click",a,function(t){function p(e){o=!1,r.hide(),e?s=c:(f.removeClass(n),f=oldEl.addClass(n))}t.stopPropagation();if(o)return;$.bdcommon.setCacheData(s,u.children(i));var a=$(t.currentTarget),l=a.data("sid"),c="global_nav_"+l,h=$.bdcommon.getCacheData(c);oldEl=f.removeClass(n),f=a.addClass(n),o=!0,r.css({top:$(window).height()/2-16+"px",left:$(window).width()/2-16+"px"}).show(),h?setTimeout(function(){u.empty().append(h),p(!0)},100):$.ajax({url:e[l],timeout:15e3,success:function(e){u.html(e),p(!0)},error:function(){p(!1)}})})},bdgameranktab:function(e){var t="up",n="global_rank_up_html"+t,r="global_rank_num"+t;return e=$.extend({},e),this.each(function(){var i=$(this);i.find("li").bind("click",function(){t=$(this).attr("data-sid"),n="global_rank_up_html"+t,r="global_rank_num"+t,i.find("li").each(function(){var i=$(this);i.removeClass(),t==i.attr("data-sid")?(i.addClass("selected"),$.bdcommon.getCacheData(n)!=""&&$.bdcommon.getCacheData(n)!=undefined?($("#dk_rank_tablist_continer_"+t).html($.bdcommon.getCacheData(n)),e.download&&$("[data-downurl]").bddownload(e.download)):$.trim($("#dk_rank_tablist_continer_"+t).find("section").html()||"")==""&&($(".dk_loading").css({top:$(window).height()/2-16+"px",left:$(window).width()/2-16+"px"}),$(".dk_loading").show(),$.post(e[t],function(r){$("#dk_rank_tablist_continer_"+t).html(r),$(".dk_loading").hide(),$.bdcommon.setCacheData(n,r),e.download&&$("[data-downurl]").bddownload(e.download)})),t=="up"?($("#dk_rank_tablist_continer_up").show(),$("#dk_rank_tablist_continer_down").hide(),$("#dk_rank_tablist_continer_good").hide(),$("#dk_rank_up").show(),$("#dk_rank_down").hide(),$("#dk_rank_good").hide()):t=="down"?($("#dk_rank_tablist_continer_down").show(),$("#dk_rank_tablist_continer_up").hide(),$("#dk_rank_tablist_continer_good").hide(),$("#dk_rank_down").show(),$("#dk_rank_up").hide(),$("#dk_rank_good").hide()):t=="good"&&($("#dk_rank_tablist_continer_good").show(),$("#dk_rank_tablist_continer_up").hide(),$("#dk_rank_tablist_continer_down").hide(),$("#dk_rank_good").show(),$("#dk_rank_up").hide(),$("#dk_rank_down").hide()),$.bdcommon.getCacheData(r)>0&&$.bdcommon.getCacheData(r)<15&&$("#dk_rank_"+t).hide()):i.removeClass("selected")})});if($.bdcommon.getCacheData(n)==""||$.bdcommon.getCacheData(n)==undefined)$.post(e.up,function(t){$("#dk_rank_tablist_continer_up").html(t),$.bdcommon.setCacheData(n,t),e.download&&$("[data-downurl]").bddownload(e.download)});else{var s=$.bdcommon.getCacheData(n)+'<script>$(".dk_rankmore_click").off().on("click", dk_more_game_click);</script>';$("#dk_rank_tablist_continer_up").html(s),e.download&&$("[data-downurl]").bddownload(e.download),$.bdcommon.getCacheData(r)>0&&$.bdcommon.getCacheData(r)<15&&$("#dk_rank_"+t).hide()}})}})}($(window));
